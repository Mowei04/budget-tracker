{% with messages = get_flashed_messages(with_categories=True) %}
  {% if messages %}
    <div class="alerts" role="status" aria-live="polite">
      {% for category, message in messages %}
        {% set variant = {
          'error': 'alert-danger',
          'warning': 'alert-warning',
          'success': 'alert-success',
          'info': 'alert-info'
        }[category] if category in ['error', 'warning', 'success', 'info'] else 'alert-primary' %}
        <div class="alert {{ variant }} shadow-sm" role="alert">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
