{% extends "base.html" %}
{% block title %}Expenditures{% endblock %}
{% block content %}
<h1>Expenditures</h1>

<form action="" method="post" name="expenditure" novalidate>
  {{ form.hidden_tag() }}
  <label for="{{ form.name.id }}">Name</label>
  {{ form.name(id=form.name.id, required=True, maxlength=120) }}
  {% for e in form.name.errors %}<span class="err">[{{ e }}]</span>{% endfor %}

  <label for="{{ form.amount.id }}">Amount</label>
  {{ form.amount(id=form.amount.id, required=True, min="0", step="0.01") }}
  {% for e in form.amount.errors %}<span class="err">[{{ e }}]</span>{% endfor %}

  {{ form.submit() }}
</form>

{% if items %}
<table role="table">
  <thead><tr><th>Name</th><th>Amount</th><th>Actions</th></tr></thead>
  <tbody>
  {% for it in items %}
    <tr>
      <td>{{ it.name }}</td>
      <td>{{ "%.2f"|format(it.amount) }}</td>
      <td>
        <a href="{{ url_for('main.edit_expenditure', item_id=it.id) }}">Edit</a>
        <form action="{{ url_for('main.delete_expenditure', item_id=it.id) }}" method="post" style="display:inline">
          {{ delete_forms[it.id].hidden_tag() }}
          {{ delete_forms[it.id].submit(id='delete-ex-' ~ it.id, class_="link-button", aria_label="Delete " ~ it.name) }}
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
  <p>No expenditure records yet.</p>
{% endif %}
{% endblock %}